stateDiagram-v2
    [*] --> เลือกกิจกรรมที่ต้องการเช็คชื่อ
    เลือกกิจกรรมที่ต้องการเช็คชื่อ --> ตรวจสอบสถานะกิจกรรม
    
    state ตรวจสอบสถานะกิจกรรม {
        [*] --> ตรวจสอบความถูกต้อง
        ตรวจสอบความถูกต้อง --> ตรวจสอบเวลาสิ้นสุด
        ตรวจสอบเวลาสิ้นสุด --> [*]
    }
    
    ตรวจสอบสถานะกิจกรรม --> แสดงข้อความแจ้งเตือน : กิจกรรมสิ้นสุดแล้ว
    แสดงข้อความแจ้งเตือน --> เลือกกิจกรรมที่ต้องการเช็คชื่อ
    
    ตรวจสอบสถานะกิจกรรม --> เริ่มการสแกน : กิจกรรมกำลังดำเนินการ
    
    state เริ่มการสแกน {
        [*] --> เปิดกล้อง
        เปิดกล้อง --> รอการสแกน
        รอการสแกน --> จับภาพ QR Code
        จับภาพ QR Code --> ถอดรหัส QR Code
        ถอดรหัส QR Code --> [*]
    }
    
    เริ่มการสแกน --> ประมวลผล QR Code
    
    state ประมวลผล QR Code {
        [*] --> ถอดรหัสด้วย AES
        ถอดรหัสด้วย AES --> ตรวจสอบความถูกต้องของข้อมูล
        ตรวจสอบความถูกต้องของข้อมูล --> ตรวจสอบการหมดอายุ
        ตรวจสอบการหมดอายุ --> [*]
    }
    
    ประมวลผล QR Code --> แสดงข้อความผิดพลาด : ไม่สามารถถอดรหัสได้หรือข้อมูลไม่ถูกต้อง
    แสดงข้อความผิดพลาด --> รอการสแกน
    
    ประมวลผล QR Code --> ประมวลผลการเข้าร่วมกิจกรรม : ถอดรหัสสำเร็จ
    
    state ประมวลผลการเข้าร่วมกิจกรรม {
        [*] --> ตรวจสอบการเข้าร่วมซ้ำ
        ตรวจสอบการเข้าร่วมซ้ำ --> บันทึกเวลาเข้า : ไม่เคยเข้าร่วม
        ตรวจสอบการเข้าร่วมซ้ำ --> บันทึกเวลาออก : เคยเข้าร่วมแล้ว
        บันทึกเวลาเข้า --> แสดงสถานะการบันทึก
        บันทึกเวลาออก --> แสดงสถานะการบันทึก
        แสดงสถานะการบันทึก --> [*]
    }
    
    ประมวลผลการเข้าร่วมกิจกรรม --> แสดงข้อมูลนักศึกษา
    แสดงข้อมูลนักศึกษา --> อัปเดตรายชื่อผู้เข้าร่วม
    อัปเดตรายชื่อผู้เข้าร่วม --> รอการสแกน
    รอการสแกน --> [*]
